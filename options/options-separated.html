<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SafeGuard 设置</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>🛡️ SafeGuard 设置</h1>
      <p class="subtitle">配置您的智能内容审核偏好</p>
    </header>
    
    <main class="main-content">
      <!-- 文本检测配置 -->
      <section class="settings-section">
        <h2>📝 文本检测配置</h2>
        
        <div class="form-group">
          <label for="text-provider">选择文本检测服务商</label>
          <select id="text-provider">
            <option value="gemini">Google Gemini (推荐)</option>
            <option value="deepseek">DeepSeek (性价比高)</option>
            <option value="qwen">通义千问</option>
          </select>
        </div>
        
        <!-- Gemini 文本配置 -->
        <div id="text-gemini-config" class="provider-config-inline">
          <div class="form-group">
            <label for="gemini-api-key">Gemini API Key <span class="required">*</span></label>
            <input type="password" id="gemini-api-key" placeholder="AIza...">
            <small class="help-text">
              获取: <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>
            </small>
          </div>
          <div class="form-group">
            <label for="gemini-text-model">文本模型</label>
            <select id="gemini-text-model">
              <option value="gemini-2.5-flash" selected>gemini-2.5-flash (推荐)</option>
              <option value="gemini-2.0-flash">gemini-2.0-flash</option>
              <option value="gemini-1.5-pro">gemini-1.5-pro (更强大)</option>
            </select>
          </div>
          <div id="gemini-text-status" class="api-status"></div>
        </div>
        
        <!-- DeepSeek 文本配置 -->
        <div id="text-deepseek-config" class="provider-config-inline" style="display: none;">
          <div class="form-group">
            <label for="deepseek-api-key">DeepSeek API Key <span class="required">*</span></label>
            <input type="password" id="deepseek-api-key" placeholder="sk-...">
            <small class="help-text">
              获取: <a href="https://platform.deepseek.com/api_keys" target="_blank">DeepSeek Platform</a>
            </small>
          </div>
          <div class="form-group">
            <label for="deepseek-text-model">文本模型</label>
            <select id="deepseek-text-model">
              <option value="deepseek-chat" selected>deepseek-chat (推荐)</option>
              <option value="deepseek-reasoner">deepseek-reasoner (R1 推理)</option>
            </select>
          </div>
          <div id="deepseek-text-status" class="api-status"></div>
        </div>
        
        <!-- Qwen 文本配置 -->
        <div id="text-qwen-config" class="provider-config-inline" style="display: none;">
          <div class="form-group">
            <label for="qwen-api-key">通义千问 API Key <span class="required">*</span></label>
            <input type="password" id="qwen-api-key" placeholder="sk-...">
            <small class="help-text">
              获取: <a href="https://dashscope.console.aliyun.com/apiKey" target="_blank">阿里云 DashScope</a>
            </small>
          </div>
          <div class="form-group">
            <label for="qwen-text-model">文本模型</label>
            <select id="qwen-text-model">
              <option value="qwen-turbo" selected>qwen-turbo (快速)</option>
              <option value="qwen-plus">qwen-plus (平衡)</option>
              <option value="qwen-max">qwen-max (最强)</option>
            </select>
          </div>
          <div id="qwen-text-status" class="api-status"></div>
        </div>
      </section>
      
      <!-- 图片检测配置 -->
      <section class="settings-section">
        <h2>🖼️ 图片检测配置</h2>
        
        <div class="form-group">
          <label for="image-provider">选择图片检测服务商</label>
          <select id="image-provider">
            <option value="gemini">Google Gemini (推荐)</option>
            <option value="qwen">通义千问</option>
          </select>
          <small class="help-text">⚠️ DeepSeek 不支持图片检测</small>
        </div>
        
        <!-- Gemini 图片配置 -->
        <div id="image-gemini-config" class="provider-config-inline">
          <div class="form-group">
            <label for="gemini-image-model">图片模型</label>
            <select id="gemini-image-model">
              <option value="gemini-2.5-flash" selected>gemini-2.5-flash (推荐)</option>
              <option value="gemini-1.5-pro">gemini-1.5-pro (更准确)</option>
            </select>
            <small class="help-text">使用与文本相同的 Gemini API Key</small>
          </div>
          <div id="gemini-image-status" class="api-status"></div>
        </div>
        
        <!-- Qwen 图片配置 -->
        <div id="image-qwen-config" class="provider-config-inline" style="display: none;">
          <div class="form-group">
            <label for="qwen-image-model">图片模型</label>
            <select id="qwen-image-model">
              <option value="qwen-vl-plus" selected>qwen-vl-plus (推荐)</option>
              <option value="qwen-vl-max">qwen-vl-max (更准确)</option>
            </select>
            <small class="help-text">使用与文本相同的通义千问 API Key</small>
          </div>
          <div id="qwen-image-status" class="api-status"></div>
        </div>
      </section>
      
      <!-- 调试选项 -->
      <section class="settings-section">
        <h2>🐛 调试选项</h2>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="enable-debug-logs">
            <span>启用调试日志</span>
            <small>在控制台显示 API 请求和响应详情</small>
          </label>
        </div>
        <div class="form-group" id="debug-details" style="display: none;">
          <label class="checkbox-label" style="margin-left: 32px;">
            <input type="checkbox" id="log-prompts" checked>
            <span>📤 记录提示词（Prompts）</span>
          </label>
          <label class="checkbox-label" style="margin-left: 32px;">
            <input type="checkbox" id="log-responses" checked>
            <span>📥 记录API响应</span>
          </label>
          <label class="checkbox-label" style="margin-left: 32px;">
            <input type="checkbox" id="log-timing" checked>
            <span>⏱️ 记录性能时间</span>
          </label>
        </div>
      </section>
      
      <!-- 检测类别 -->
      <section class="settings-section">
        <h2>✅ 检测类别</h2>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="detect-privacy" checked>
            <span>🔒 检测隐私信息</span>
            <small>电话、邮箱、身份证号、银行卡号</small>
          </label>
          
          <label class="checkbox-label">
            <input type="checkbox" id="detect-sensitive" checked>
            <span>⚠️ 检测敏感内容</span>
            <small>色情、暴力、政治敏感</small>
          </label>
          
          <label class="checkbox-label">
            <input type="checkbox" id="detect-harmful" checked>
            <span>☠️ 检测有害信息</span>
            <small>赌博、诈骗、毒品、自残</small>
          </label>
          
          <label class="checkbox-label">
            <input type="checkbox" id="detect-images" checked>
            <span>🖼️ 检测图片内容</span>
            <small>对图片进行内容审核</small>
          </label>
        </div>
      </section>
      
      <!-- 白名单 -->
      <section class="settings-section">
        <h2>🌐 网站白名单</h2>
        <p class="section-description">以下网站将不会进行内容检测</p>
        <div class="form-group">
          <div class="input-with-button">
            <input type="text" id="whitelist-input" placeholder="输入域名，例如: example.com">
            <button id="add-whitelist" class="btn-primary">添加</button>
          </div>
          <div id="whitelist-domains"></div>
        </div>
      </section>
      
      <!-- 性能设置 -->
      <section class="settings-section">
        <h2>⚡ 性能设置</h2>
        <div class="form-group">
          <label for="detection-delay">检测延迟</label>
          <select id="detection-delay">
            <option value="500">0.5 秒</option>
            <option value="1000" selected>1 秒</option>
            <option value="2000">2 秒</option>
          </select>
          <small class="help-text">动态内容加载后延迟检测的时间</small>
        </div>
        
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="skip-small-images" checked>
            <span>跳过小图片</span>
            <small>不检测小于 100KB 的图片，提升性能</small>
          </label>
        </div>
      </section>
    </main>
    
    <footer class="footer">
      <button id="save-button" class="btn-success">💾 保存设置</button>
      <button id="reset-button" class="btn-secondary">🔄 重置为默认</button>
      <div id="status-message" class="save-status"></div>
    </footer>
  </div>
  
  <script src="options.js"></script>
</body>
</html>
